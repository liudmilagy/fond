import{view_header}from"../general.min.js";var news_url="news_list_pager";webix.proxy.idata={$proxy:!0,load:function(t,e){this._attachHandlers(t);var i=this.source;i+=-1==i.indexOf("?")?"?":"&";var a=e?e.count:t.config.datafetch||0,n=e?e.start:0;return i+="count="+a,i+=n?"&start="+n:"",webix.ajax(i).then(webix.bind(function(t){return t=t.json().data,this._checkLoadNext(t),t},this))},_checkLoadNext:function(t){t.length||(this._dontLoadNext=!0)},_attachHandlers:function(t){var e=this;t.config.columns?t.attachEvent("onScrollY",function(){e._loadNext(this)}):t.attachEvent("onAfterScroll",function(){e._loadNext(this)}),this._attachHandlers=function(){}},_loadNext:function(t){var e=t.getScrollState().y+t.$view.clientHeight,i=t.getItemNode(t.getLastId()),a=t.config.rowHeight||t.type.height;i&&e>=i.offsetTop+a&&!this._dontLoadNext&&t.loadNext(t.config.datafetch,t.count()+1)}};var options={year:"numeric",month:"numeric",day:"numeric"};const bigNewsList={id:"newsListId",rows:[{id:"newsListsHeaderId",template:"Новости",css:"other_tab_main_title",borderless:!0,align:"center",autoheight:!0},{gravity:.04},{view:"dataview",id:"newsListDataview",margin:20,paddingX:10,css:"fond_bg2",scroll:!1,borderless:!0,template:"<div class='news_item'><img src='#attachmentPath#' height='225' width='300' style='object-fit: cover'> <br>#heading# <br>Дата публикации: #startTime#</div>",xCount:4,type:{height:350,width:"auto",float:"right"},datafetch:10,url:"idata->"+news_url,onClick:{news_item:function(t,e){var i=$$("newsListDataview").getItem(e);window.location.href="/news_list/news?hash_id="+i.hashId}},on:{onAfterLoad:()=>{var t=$$("newsListDataview").count();if(0!=t){var e=$$("newsListDataview").config.xCount,i=350*Math.round(t/e);$$("newsListDataview").$height<i&&($$("newsListDataview").config.height=i,$$("newsListDataview").resize())}}}},{view:"pager",id:"Pager",height:38,size:25,group:5,template:"{common.first()}{common.prev()}{common.pages()}{common.next()}{common.last()}"}]},smallNewsList={id:"newsListId",rows:[{id:"newsListsHeaderId",template:"Новости",css:"other_tab_main_title",borderless:!0,align:"center",autoheight:!0},{view:"dataview",id:"newsListDataview",margin:20,paddingX:10,scroll:"y",borderless:!0,template:"<div class='news_item'><img src='#attachmentPath#' height='187.5' width='250' style='object-fit: cover'> <br>#heading# <br>Дата публикации: #startTime#</div>",xCount:1,type:{height:350,width:"auto",float:"right"},datafetch:10,url:"idata->"+news_url,onClick:{news_item:function(t,e){var i=$$("newsListDataview").getItem(e);window.location.href="/news_list/news?hash_id="+i.hashId}}},{view:"pager",id:"Pager",height:38,size:25,group:5,template:"{common.first()}{common.prev()}{common.pages()}{common.next()}{common.last()}"}]};export function newsList(t){return t?bigNewsList:smallNewsList}