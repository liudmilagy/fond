import{mainTemplate}from"./mainTemplate.min.js";import{lft_wdth,rght_wdth,resizeSides}from"../general.min.js";import{resizeMenuOptions}from"../header/menu.min.js";import{getImageClassByExtension,main_body_width,collapsedSideBarWidth}from"../general.min.js";import{getFileIcon}from"../general.min.js";function Docs(e,i){return{view:"dataview",label:"Прикрепленные файлы",labelPosition:"top",id:e+"_docs_grid",css:"contacts",borderless:!0,align:"center",scroll:!1,select:1,minWidth:320,minHeight:200,template:function(e){let i="../"+getFileIcon(e.fileExtension),t=e.timeCreate.substr(0,10),o="<div class='overall'><div><img style='position: absolute' src = "+i+"> <div class='doc_title' style='width: available'>"+e.originalFileName.slice(0,-4)+"</div>";return o+="<div class='doc_time_create'>"+t+"</div><div class='download_docs'><a style='text-decoration: none; color: #1ca1c1' href="+e.attachmentPath+" download>Скачать файл</a></div></div></div>"},url:i,xCount:2,type:{height:96,width:"auto",float:"right"},scheme:{},on:{onBeforeLoad:()=>{document.body.clientWidth<main_body_width&&($$(e+"_docs_grid").config.xCount=1)},onAfterLoad:()=>{var i=$$(e+"_docs_grid").count();if(0===i)$$(e+"_docs_grid").hide();else{var t=$$(e+"_docs_grid").config.xCount,o=100*(i%t==0?i/t:1+i/t);$$(e+"_docs_grid").$height<o&&($$(e+"_docs_grid").config.height=o,$$(e+"_docs_grid").resize())}}}}}function Form(e,i){return{id:"formId",borderless:!0,rows:[{view:"template",id:"headerId",css:"other_tab_main_title",borderless:!0,align:"center",autoheight:!0},{view:"template",id:"htmlText",scroll:!1,borderless:!0,autoheight:!0},Docs(e,i),{height:100}]}}function bigForm(e){let i=webix.ui(mainTemplate);var t=webix.ajax().sync().get("/terms_of_providing_microloans_info");webix.ui({id:"content",view:"scrollview",width:e,scroll:"xy",body:{margin:10,cols:[lft_wdth,Form("tab_file","terms_of_providing_microloans_files/"),rght_wdth]}},$$("content")),$$("headerId").setHTML("Правила предоставления микрозаймов"),$$("htmlText").setHTML(t.responseText),webix.event(window,"resize",function(e){resizeMenuOptions(),resizeSides(),i.resize()})}function smallForm(e){let i=webix.ui(mainTemplate);var t=webix.ajax().sync().get("/terms_of_providing_microloans_info");webix.ui({id:"content",view:"scrollview",width:e,scroll:"xy",body:{rows:[Form("tab_file","terms_of_providing_microloans_files/")]}},$$("content")),$$("headerId").setHTML("Правила предоставления микрозаймов"),$$("htmlText").setHTML(t.responseText),webix.event(window,"resize",function(e){i.resize()}),webix.attachEvent("onRotate",function(e){$$("content").config.width=document.body.clientWidth-collapsedSideBarWidth,$$("content").resize()})}webix.ready(function(){return document.body.clientWidth<main_body_width?smallForm(document.body.clientWidth-collapsedSideBarWidth):bigForm(main_body_width)});