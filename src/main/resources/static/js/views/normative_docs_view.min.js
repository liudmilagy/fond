import{mainTemplate}from"./mainTemplate.min.js";import{lft_wdth,rght_wdth,resizeSides}from"../general.min.js";import{resizeMenuOptions}from"../header/menu.min.js";import{getImageClassByExtension,getFileIcon}from"../general.min.js";import{main_body_width,collapsedSideBarWidth}from"../general.min.js";function normativeDocsDocs(e,i){return{view:"dataview",label:"Прикрепленные файлы",labelPosition:"top",id:e+"_docs_grid",css:"contacts",borderless:!0,align:"center",scroll:!1,select:1,minWidth:320,minHeight:200,template:function(e){let i="../"+getFileIcon(e.fileExtension),t=e.timeCreate.substr(0,10),o="<div class='overall'><div><img style='position: absolute' src = "+i+"> <div class='doc_title'>"+e.originalFileName.slice(0,-4)+"</div>";return o+="<div class='doc_time_create'>"+t+"</div><div class='download_docs'><a style='text-decoration: none; color: #1ca1c1' href="+e.attachmentPath+" download>Скачать файл</a></div></div></div>"},url:i,xCount:2,type:{height:96,width:"auto",float:"right"},scheme:{},on:{onBeforeLoad:()=>{document.body.clientWidth<main_body_width&&($$(e+"_docs_grid").config.xCount=1)},onAfterLoad:()=>{var i=$$(e+"_docs_grid").count();if(0===i)$$(e+"_docs_grid").hide();else{var t=$$(e+"_docs_grid").config.xCount,o=100*(i%t==0?i/t:1+i/t);$$(e+"_docs_grid").$height<o&&($$(e+"_docs_grid").config.height=o,$$(e+"_docs_grid").resize())}}}}}function normativeDocsForm(e,i){return{id:"normativeDocsFormId",borderless:!0,rows:[{id:"normativeDocsHeaderId",template:"Нормативные документы",css:"other_tab_main_title",borderless:!0,align:"center",autoheight:!0},{view:"template",id:"htmlText",scroll:!1,borderless:!0,autoheight:!0},normativeDocsDocs(e,i)]}}function smallNormativeForm(e){let i=webix.ui(mainTemplate);var t=webix.ajax().sync().get("/normative_docs_info");webix.ui({id:"content",view:"scrollview",scroll:"xy",width:e,body:{margin:10,cols:[normativeDocsForm("tab_file","normative_docs_files/")]}},$$("content")),$$("htmlText").setHTML(t.responseText),webix.event(window,"resize",function(e){i.resize()})}function bigNormativeForm(e){let i=webix.ui(mainTemplate);var t=webix.ajax().sync().get("/normative_docs_info");webix.ui({id:"content",view:"scrollview",scroll:"xy",width:e,body:{margin:10,cols:[lft_wdth,normativeDocsForm("tab_file","normative_docs_files/"),rght_wdth]}},$$("content")),$$("normativeDocsHeaderId").setHTML("Нормативные документы"),$$("htmlText").setHTML(t.responseText),webix.event(window,"resize",function(e){resizeMenuOptions(),resizeSides(),i.resize()})}webix.ready(function(){return document.body.clientWidth<main_body_width?smallNormativeForm(document.body.clientWidth-collapsedSideBarWidth):bigNormativeForm(main_body_width)});