import{mainTemplate}from"./mainTemplate.min.js";import{lft_wdth,rght_wdth,resizeSides}from"../general.min.js";import{resizeMenuOptions}from"../header/menu.min.js";import{getImageClassByExtension}from"../general.min.js";import{map}from"../map/map.min.js";import{main_body_width,collapsedSideBarWidth}from"../general.min.js";import{getFileIcon}from"../general.min.js";function contactsDocs(e,t){return{view:"dataview",label:"Прикрепленные файлы",labelPosition:"top",id:e+"_docs_grid",css:"contacts",borderless:!0,align:"center",scroll:!1,select:1,minWidth:320,minHeight:200,template:function(e){let t="../"+getFileIcon(e.fileExtension),i=e.timeCreate.substr(0,10),o="<div class='overall'><div><img style='position: absolute' src = "+t+"> <div class='doc_title'>"+e.originalFileName.slice(0,-4)+"</div>";return o+="<div class='doc_time_create'>"+i+"</div><div class='download_docs'><a style='text-decoration: none; color: #1ca1c1' href="+e.attachmentPath+" download>Скачать файл</a></div></div></div>"},url:t,xCount:2,type:{height:96,width:"auto",float:"right"},scheme:{},on:{onBeforeLoad:()=>{document.body.clientWidth<main_body_width&&($$(e+"_docs_grid").config.xCount=1)},onAfterLoad:()=>{var t=$$(e+"_docs_grid").count();if(0===t)$$(e+"_docs_grid").hide();else{var i=$$(e+"_docs_grid").config.xCount,o=100*(t%i==0?t/i:1+t/i);$$(e+"_docs_grid").$height<o&&($$(e+"_docs_grid").config.height=o,$$(e+"_docs_grid").resize())}}}}}function contactsForm(e,t){return{id:"contactsFormId",borderless:!0,rows:[{view:"template",id:"contactsHeaderId",css:"other_tab_main_title",borderless:!0,align:"center",autoheight:!0},{view:"template",id:"htmlText",scroll:!1,borderless:!0,autoheight:!0},contactsDocs(e,t),map(),{height:100}]}}function bigContactsForm(){let e=webix.ui(mainTemplate);var t=webix.ajax().sync().get("/contacts_info");webix.ui({id:"content",view:"scrollview",scroll:"xy",body:{margin:10,cols:[lft_wdth,contactsForm("tab_file","contacts_files/"),rght_wdth]}},$$("content")),$$("contactsHeaderId").setHTML("Контакты"),$$("htmlText").setHTML(t.responseText),webix.event(window,"resize",function(t){resizeMenuOptions(),resizeSides(),e.resize()})}function smallContactsForm(){let e=webix.ui(mainTemplate);var t=webix.ajax().sync().get("/contacts_info");webix.ui({id:"content",view:"scrollview",scroll:"xy",body:{margin:10,cols:[contactsForm("tab_file","contacts_files/")]}},$$("content")),$$("contactsHeaderId").setHTML("Контакты"),$$("htmlText").setHTML(t.responseText),webix.event(window,"resize",function(t){e.resize()})}webix.ready(function(){return document.body.clientWidth<main_body_width?smallContactsForm():bigContactsForm()});